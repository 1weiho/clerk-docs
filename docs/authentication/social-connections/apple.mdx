---
description: Learn how to allow users to sign into your Clerk app with their Apple ID using OAuth.
---

# Use Sign in with Apple for OAuth

<TutorialHero
  beforeYouStart={[
    {
      title: "A Clerk application is required.",
      link: "/docs/quickstarts/setup-clerk",
      icon: "clerk",
    },
    {
      title: "An Apple Developer account is required.",
      link: "https://developer.apple.com/programs/enroll/",
      icon: "user-circle",
    }
  ]}
>

- Use [Sign in with Apple](https://developer.apple.com/sign-in-with-apple/) to authenticate users with OAuth.

</TutorialHero>

Enabling OAuth via [Sign in with Apple](https://developer.apple.com/sign-in-with-apple/) allows your users to sign in and sign up to your Clerk application with their Apple ID.

For development instances, Clerk uses preconfigured shared OAuth credentials and redirect URIs for development instances - no other configuration is needed. For production instances, you must generate your own:

1. Apple Team ID
2. Apple Services ID
3. Apple Key ID
4. Private Key

You must also copy the following values from your Clerk instance to your Apple application:

1. Return URL (the OAuth redirect URI)
2. Email Source for Apple Private Email Relay

This guide will walk you through the process.

<Steps>

### Configuring Apple social connection

First, sign in to the Apple Developer portal and from the sidebar, click on **Certificates, Identifiers and Profiles.**

<Images
  width={1587}
  height={576}
  src="/docs/images/authentication-providers/apple/navigating-to-certificates-identifiers-profiles.jpg"
  alt="Navigating to Certificates, Identifiers and Profiles"
/>

### Get your Apple Team ID

1. In the Apple Developer portal, in the sidebar, select **Certificates, Identifiers and Profiles**.
1. In the sidebar on the next page, select **Identifiers**.
1. In the dropdown near the top-right of the page, select the **App IDs** option from the list.
1. Select the plus icon (+) beside the word "Identifiers" near the top of the page.
1. On the **Register a new identifier** page, select **App IDs**, then select **Continue**.
1. On the next page, you'll be prompted to select a **type** for your application. Choose **App** and select **Continue.**
1. On the next page, fill in a description for your **App ID** and a **Bundle ID**. Any value is fine, such as "Clerk demo app". Under **Capabilities**, ensure that **Sign In with Apple** is enabled. Then select **Continue**.
1. You'll be taken to the confirmation view. Save your **App ID Prefix** somewhere secure, as you'll need it to configure your Clerk app. This is your **App Team ID**.
1. Finally, select **Register**.

### Get your Apple Services ID

1. Return to the **Identifiers** page from before.
1. In the dropdown near the top-right of the page, select the **Services IDs** option from the list.
1. Select the plus icon (+) beside the word "Identifiers" near the top of the page.
1. On the **Register new identifier** page, select **Services IDs**, then select **Continue**.
1. On the next page, add a description for your **Services ID**, and set an **Identifier**. The **Identifier** will be your **Services ID** value in your Clerk instance, so save it somewhere secure. Finally, select **Continue**.
1. In the confirmation view, select **Register**.
1. After the registration is finished, go back to configure the newly-created Services ID. Make sure the **Sign In with Apple** box is enabled and click **Configure**.

<Images
  width={1188}
  height={428}
  src="/docs/images/authentication-providers/apple/navigating-to-the-configuration-page.jpg"
  alt="Navigating to the configuration page"
/>

This configuration screen is where you tell Apple what domain and redirect URIs your application will use. Choose the App ID you created before, and in the domain enter `clerk.<your-domain>`.

Next, in your Clerk Dashboard, go to **User & Authentication > [Social Connections](https://dashboard.clerk.com/last-active?path=user-authentication/social-connections)**. Click the gear icon next to the Apple provider and copy the **Authorized redirect URI** value. Paste the value into the **Return URLs** in Apple Developer Portal and click **Next**.

<Images
  width={704}
  height={801}
  src="/docs/images/authentication-providers/apple/adding-the-values-from-clerk-into-configuration.jpg"
  alt="Adding the values from the Clerk dashboard into the configuration"
/>

### Retrieving the Apple Key ID and private key

Apple differs a bit from most other providers, in that it does not use a shared Client Secret, but rather public/private keypairs.

The general concept is that a keypair is generated in the Apple Developer portal, and during an OAuth flow, your application is expected to mint a JWT that's signed with that private key. The private key essentially replaces the commonly used "Client Secret" that you see in other OAuth vendors.

Let's see how to generate a keypair and how to retrieve the Key ID and the private key values that you'll need to configure Apple SSO in Clerk.

Once again, navigate to the **Certificates, Identifiers & Profiles** page and choose **Keys** from the sidebar. In the next screen, click the blue plus icon.

Fill in a descriptive name (it doesn't matter much) and make sure you've ticked the **Sign In with Apple** checkbox from the list below. Then, click the corresponding **Configure** on the right column.

<Images
  width={1226}
  height={771}
  src="/docs/images/authentication-providers/apple/registering-a-new-key.jpg"
  alt="Registering a new key"
/>

You'll be taken to a page where you'll have to associate the key you're about to create, with an **App ID**.

From the **Primary App ID** dropdown, select the App ID you created in the first step of this guide and click **Save**.

<Images
  width={1211}
  height={519}
  src="/docs/images/authentication-providers/apple/associating-an-app-id-to-the-newly-created-key.jpg"
  alt="Associating an App ID to the newly created key"
/>

You'll be taken back to the previous **Register a New Key** page. Click **Continue** and you'll be presented with the final confirmation screen. Verify that **Sign in with Apple** is checked and click **Register**.

<Images
  width={1202}
  height={542}
  src="/docs/images/authentication-providers/apple/finalizing-the-creation-of-the-newly-created-key.jpg"
  alt="Finalizing the creation of the newly created key"
/>

You'll be taken to a page titled **Download Your Key**. From here, you want to note down the displayed **Key ID**. You will also download the private key as a file (as the instructions point out, be sure to backup the key in a secure place). Click on **Download** to retrieve the private key.

<Images
  width={1209}
  height={494}
  src="/docs/images/authentication-providers/apple/downloading-the-newly-created-key.jpg"
  alt="Downloading the newly created key"
/>

With the Key ID and your private key at hand, you have everything you need to configure Apple SSO in your Clerk Dashboard. Click **Done**.

### Configuring Email Source for Apple Private Relay users

> This section concerns only production instances. Development and staging instances are handled for you automatically.

Apple provides a privacy feature called [Hide My Email](https://support.apple.com/en-us/HT210425#hideemail), in which users can choose to Sign In with Apple to your instance, but without revealing their real email addresses. Instead, your instance will receive an app-specific email address, that will nevertheless forward any emails to the real user's address.

To be able to send email properly to users with private addresses, you must configure an additional setting in the Apple Developer portal.

First, navigate to Clerk Dashboard, to your _production_ instance's **Social Connections** settings page. Click to enable Apple, and in the configuration modal, you'll see a read-only setting named **Email Source for Apple Private Email Relay**.

> This setting is only available after you have deployed your instance.

<Images
  width={564}
  height={1149}
  src="/docs/images/authentication-providers/apple/finding-email-source-on-clerk.jpg"
  alt="Finding the Email Source for Apple Private Email Relay value on the Clerk dashboard"
/>

The value of the setting is essentially an email address; copy it, go to your Apple Developer portal, and go to the **Certificates, Identifiers & Profiles** page. Click on **More** from the sidebar on the left and then **Configure**.

<Images
  width={1249}
  height={379}
  src="/docs/images/authentication-providers/apple/accessing-configuration-certificates-identifiers-profiles.jpg"
  alt="Accessing the configuration page for Certificates, Identifiers & Profiles"
/>

On the next screen, click on the blue plus icon to add a new **Email Source**.

<Images
  width={1216}
  height={438}
  src="/docs/images/authentication-providers/apple/creating-a-new-email-source.jpg"
  alt="Creating a new Email Source"
/>

Paste the value you copied from the Clerk Dashboard to the **Email Addresses** field and click **Next.** Then click **Register** to confirm the changes.

<Images
  width={593}
  height={808}
  src="/docs/images/authentication-providers/apple/adding-value-from-clerk-into-email-addresses.jpg"
  alt="Adding the value from the Clerk dashboard into the email addresses list"
/>

After this, you should now see the email address added to the list, and it should be marked as verified with a green check icon.

<Images
  width={1204}
  height={447}
  src="/docs/images/authentication-providers/apple/certificates-identifiers-profiles-verified-email-source.jpg"
  alt="Certificates, Identifiers & Profiles showing the verified email source"
/>

If it does not appear as Verified yet, don't worry, DNS propagation may take some time to complete. Wait a few minutes (it could even be hours) and click on **Reverify SPF** button from that list.

For more info about Apple's Private Relay service, refer to the following documentation:

- https://support.apple.com/en-us/HT210425#hideemail
- https://help.apple.com/developer-account/?lang=en#/devf822fb8fc

### Configuring the settings in your instance

If you completed the previous steps of this guide, by now you should have the following information available, all provided by the Apple Developer portal:

1. the Apple Team ID
2. the Apple Services ID
3. the Apple Key ID
4. the private key file

Don't worry, the hard part is over. Now you can go to your instance's settings in the Dashboard, and navigate to the **Social Connections** settings under **User & Authentication**. Find the **Apple** provider from the list, toggle it on and click on the gear icon.

In the modal, you'll see all the corresponding fields that you should paste the aforementioned values into. For the private key file, open it with a text editor and just copy/paste the contents.

After filling in the settings, you'll end up with something roughly like this:

<Images
  width={592}
  height={1297}
  src="/docs/images/authentication-providers/apple/adding-values-into-clerk.jpg"
  alt="Adding the values into the Clerk dashboard"
/>

Click **Save** and you should be good to go. Congratulations! Social connection with Apple is now configured for your instance.

</Steps>

## References

- [Official Sign In with Apple documentation](https://developer.apple.com/documentation/sign_in_with_apple)
- [Social Connection (OAuth) with Clerk](/docs/authentication/social-connections/oauth)
